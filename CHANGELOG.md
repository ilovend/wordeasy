# WordEasy 更新日志

## 2025-11-25 迭代更新

### ✨ 新功能

#### 1. TTS 发音功能
- ✅ 集成浏览器原生 Web Speech API
- ✅ 支持美式英语发音（自动选择最佳语音）
- ✅ 在拼写游戏界面添加"听发音"按钮
- ✅ 播放状态提示，防止重复点击
- 📁 新增文件：`frontend/src/utils/tts.js`

#### 2. 智能拼写错误提示
- ✅ 逐字符差异对比显示
- ✅ 绿色标记正确字母
- ✅ 红色划线标记错误字母
- ✅ 蓝色下划线标记缺失字母
- ✅ 直观的错误分析，帮助快速纠正
- 📁 新增文件：`frontend/src/utils/stringDiff.js`

#### 3. 速拼挑战模式 ⚡
- ✅ 10个单词，60秒倒计时挑战
- ✅ 支持三个难度等级选择
- ✅ 实时正确率统计
- ✅ 本地最高纪录保存
- ✅ 新纪录提示和庆祝动画
- ✅ 支持跳过功能
- 📁 新增文件：`frontend/src/views/SpeedChallenge.vue`
- 📁 更新路由：`frontend/src/router/index.js`
- 📁 更新首页：`frontend/src/views/Home.vue`（添加入口）

### 🐛 Bug 修复

#### 上传词库问题修复
- ✅ 修复 UNIQUE 约束冲突（重复单词导致500错误）
- ✅ 优化批量查询，一次性检查所有重复单词
- ✅ 添加文件内去重逻辑
- ✅ 增加事务回滚机制
- ✅ 详细的上传反馈（导入数量 + 跳过数量）
- 📁 优化文件：`backend/app/main.py`

#### 词库统计问题修复
- ✅ 修复总单词数限制在3000的问题
- ✅ 新增 `/api/words/stats` 专用统计端点
- ✅ 使用数据库 `count()` 直接统计，精确高效
- 📁 后端新增：`backend/app/main.py` - 统计API
- 📁 前端新增：`frontend/src/api/index.js` - `getWordStats()`
- 📁 前端优化：`frontend/src/components/WordList.vue`

#### 网络错误优化
- ✅ 上传超时从 60秒 增加到 120秒
- ✅ 添加 `maxContentLength` 和 `maxBodyLength` 无限制
- ✅ 详细的错误分类提示（超时/网络/服务器）
- ✅ 添加控制台日志便于调试
- 📁 优化文件：`frontend/src/api/index.js`
- 📁 优化文件：`frontend/src/components/WordList.vue`

### 🛠️ 辅助工具

- ✅ `restart.bat` - 快速重启前后端服务
- ✅ `check_services.bat` - 诊断服务运行状态

---

## 功能对比

| 功能 | 原版本 | 当前版本 | 状态 |
|------|--------|----------|------|
| 拼写攻防战 | ✅ | ✅ | 已完成 |
| TTS 发音 | ❌ | ✅ | 新增 |
| 错误提示 | 基础 | 智能差异分析 | 优化 |
| 速拼挑战 | ❌ | ✅ | 新增 |
| 复习模式 | ✅ | ✅ | 已完成 |
| 词库管理 | ✅ | ✅ | 已优化 |
| 词库上传 | 有bug | 完善 | 已修复 |
| 词库统计 | 有限制 | 精确统计 | 已修复 |
| 网络超时 | 60秒 | 120秒 | 已优化 |

---

## 📊 技术指标

- **前端包体积**: < 500KB（Tailwind 按需引入）
- **后端性能**: 批量插入优化（bulk_save_objects）
- **数据库**: SQLite 单文件，支持数万单词
- **浏览器兼容**: Chrome/Edge/Firefox（支持 Web Speech API）
- **离线支持**: 除发音外全功能可用

---

## 🚀 使用方法

### 启动服务
```powershell
# 方式1：一键启动
.\start.bat

# 方式2：单独重启
.\restart.bat

# 方式3：诊断服务
.\check_services.bat
```

### 访问地址
- **前端**: http://localhost:5173
- **后端**: http://localhost:8000
- **API文档**: http://localhost:8000/docs

---

## 📝 待优化功能

### 高优先级
- [ ] 错词歼灭战模式增强
- [ ] 学习统计可视化（图表）

### 中优先级
- [ ] 移动端响应式优化
- [ ] 主题切换（暗黑模式）

### 低优先级
- [ ] Electron 桌面打包
- [ ] 多用户支持（可选）

---

## 🎯 下次迭代方向

1. **数据可视化**: 学习进度曲线、正确率趋势图
2. **错词本强化**: 专项练习模式，针对性复习
3. **成就系统**: 徽章、连胜、里程碑
4. **社交分享**: 成绩分享（可选）

---

**开发团队**: AI Assistant + Claude Sonnet 4.5  
**更新日期**: 2025年11月25日  
**版本**: v1.1.0
